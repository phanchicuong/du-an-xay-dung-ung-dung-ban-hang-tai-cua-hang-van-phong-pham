create database QLVanPhongPham2
go

use QLVanPhongPham2
go

create table KHACHHANG
(
	TENKH NVARCHAR(20) NOT NULL PRIMARY KEY,
	MAKH INT NOT NULL ,
	DIACHI NVARCHAR(30) NOT NULL,
	SODT VARCHAR(10)

)
GO

create table SANPHAM
(
	TenSanPham nvarchar(50) NOT NULL PRIMARY KEY,
	MaSanPham INT NOT NULL, 
	TenLoaiSanPham nvarchar(50) NOT NULL,
	GiaNhap float ,
	GiaBan float ,
	TrangThai int NOT NULL
	
)
GO

CREATE TABLE LOAISANPHAM
(
	
	TenLoaiSanPham nvarchar(50) NOT NULL PRIMARY KEY,
	MaLoaiSanPham INT NOT NULL 
)
GO
create table DATHANG
(
	MADON INT NOT NULL PRIMARY KEY,
	TENKH NVARCHAR(20) NOT NULL,
	TenSanPham nvarchar(50) NOT NULL,
	GiaBan float NOT NULL,
	SOLUONG INT,
	NGAYBAN DATE,
	NGAYGIAO DATE

)
GO


create table CHITIETDATHANG
(
	MADON INT NOT NULL PRIMARY KEY,
	TENKH NVARCHAR(20) NOT NULL,
	TenSanPham nvarchar(50) NOT NULL,
	GiaBan float NOT NULL,
	SOLUONG INT,
	NGAYBAN DATE,
	NGAYGIAO DATE

)
GO




alter table DATHANG
 add constraint StoLS
foreign key (TENKH)
references dbo.KHACHHANG

alter table DATHANG
 add constraint StoLA
foreign key (TenSanPham)
references dbo.SANPHAM

alter table CHITIETDATHANG
 add constraint StoLB
foreign key (TENKH)
references dbo.KHACHHANG

alter table CHITIETDATHANG
 add constraint StoLD
foreign key (TenSanPham)
references dbo.SANPHAM


alter table SANPHAM
 add constraint StoLC
foreign key (TenLoaiSanPham)
references dbo.LOAISANPHAM


INSERT INTO KHACHHANG VALUES(N'MAI NGỌC KHANG',1,N'Bắc Ninh','0902651132')
INSERT INTO KHACHHANG VALUES(N'HUỲNH GIA THUẬN',2,N'TP HCM','0912354513')
INSERT INTO KHACHHANG VALUES(N'PHAN CHÍ CƯỜNG',3,N'TIỀN GIANG','0907799886')
INSERT INTO KHACHHANG VALUES(N'LÊ THÀNH AN',4,N'TIỀN GIANG','0902481132')
INSERT INTO KHACHHANG VALUES(N'CHÂU MINH QUÈ',5,N'ĐÀ NẴNG','0902651452')

INSERT INTO LOAISANPHAM VALUES (N'Máy Tính', 1)
INSERT INTO LOAISANPHAM VALUES (N'Giấy A3', 2)
INSERT INTO.LOAISANPHAM VALUES (N'Thước Kẻ', 3)
INSERT INTO.LOAISANPHAM VALUES (N'Balo', 4)
INSERT INTO.LOAISANPHAM VALUES (N'Bút chì', 5)
INSERT INTO.LOAISANPHAM VALUES (N'linh Kiện', 6)


INSERT INTO SANPHAM  VALUES (N'Túi Đeo Nam',1,N'Balo',13000.000,20000.000,1 )
INSERT INTO SANPHAM  VALUES (N'Thước KoPa',2,N'Thước Kẻ',90.000,110.000,5 )
INSERT INTO SANPHAM  VALUES (N'Giấy Thi',3,N'Giấy A3',50.000,60.000,100)
INSERT INTO SANPHAM  VALUES (N'Bút Bi Xanh',4,N'Bút chì',5.000,10.000,200 )
INSERT INTO SANPHAM  VALUES (N'Bút Bi Đỏ',5,N'Bút chì',5.000,10.000,30 )
INSERT INTO SANPHAM  VALUES (N'Casio',6,N'Máy Tính',500.000,600.000,40)

INSERT INTO DATHANG VALUES(1,N'MAI NGỌC KHANG',N'Giấy Thi',60.000,7,'2021-12-05','2021-12-10')
INSERT INTO DATHANG VALUES(2,N'PHAN CHÍ CƯỜNG',N'Thước KoPa',110.000,3,'2021-11-05','2021-12-10')
INSERT INTO DATHANG VALUES(3,N'MAI NGỌC KHANG',N'Bút Bi Đỏ',10.000,1,'2021-12-05','2021-12-10')
INSERT INTO DATHANG VALUES(4,N'LÊ THÀNH AN',N'Bút Bi Xanh',10.000,2,'2021-09-02','2021-09-22')
INSERT INTO DATHANG VALUES(19,N'HUỲNH GIA THUẬN',N'Giấy Thi',60.000,7,'2021-12-05','2021-12-10')



INSERT INTO CHITIETDATHANG VALUES(1,N'HUỲNH GIA THUẬN',N'Giấy Thi',60.000,7,'2021-12-05','2021-12-10')






